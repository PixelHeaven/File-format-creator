<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADLIOT File Format</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .container { margin-bottom: 30px; }
        .tabs { display: flex; border-bottom: 2px solid #ccc; }
        .tab { padding: 10px 20px; cursor: pointer; border: none; background: #f0f0f0; }
        .tab.active { background: #007cba; color: white; }
        .tab-content { display: none; padding: 20px; border: 1px solid #ccc; }
        .tab-content.active { display: block; }
        textarea { width: 100%; height: 200px; margin: 10px 0; }
        button { padding: 10px 20px; margin: 5px; background: #007cba; color: white; border: none; cursor: pointer; }
        button:hover { background: #005a8b; }
        .file-input { margin: 10px 0; }
        code { background: #f4f4f4; padding: 2px 5px; }
        pre { background: #f4f4f4; padding: 15px; overflow-x: auto; }
        .success { color: green; margin: 10px 0; }
        .error { color: red; margin: 10px 0; }
        .info-box { background: #e8f4f8; padding: 15px; margin: 10px 0; border-left: 4px solid #007cba; }
    </style>
</head>
<body>
    <h1>ADLIOT File Format</h1>
    
    <div class="info-box">
        <strong>üìã How to use:</strong>
        <ol>
            <li><strong>Create files:</strong> Enter text and click "Create .adliot File" - your browser will download the encrypted file</li>
            <li><strong>Open files:</strong> Use "Choose File" to select a .adliot file, then click "Open File" to decrypt it</li>
            <li><strong>Check downloads:</strong> Look in your browser's download folder (usually Downloads folder)</li>
        </ol>
    </div>
    
    <div class="tabs">
        <button class="tab active" onclick="showTab('creator')">File Creator</button>
        <button class="tab" onclick="showTab('opener')">File Opener</button>
        <button class="tab" onclick="showTab('test')">Test & Demo</button>
        <button class="tab" onclick="showTab('docs')">Documentation</button>
        <button class="tab" onclick="showTab('integration')">Code Integration</button>
    </div>

    <div id="creator" class="tab-content active">
        <h2>Create ADLIOT File</h2>
        <textarea id="contentInput" placeholder="Enter your content here...">This is a sample text that will be encrypted into an ADLIOT file!</textarea>
        <br>
        <button onclick="createFile()">Create .adliot File</button>
        <div id="createResult"></div>
    </div>

    <div id="opener" class="tab-content">
        <h2>Open ADLIOT File</h2>
        <input type="file" id="fileInput" accept=".adliot" class="file-input">
        <br>
        <button onclick="openFile()">Open File</button>
        <div id="openResult"></div>
        <textarea id="decodedContent" readonly placeholder="Decoded content will appear here..."></textarea>
    </div>

    <div id="test" class="tab-content">
        <h2>Test & Demo</h2>
        <div class="info-box">
            <strong>üß™ Quick Test:</strong> This will create a test file and immediately try to decode it to verify everything works.
        </div>
        <button onclick="runFullTest()">Run Full Test</button>
        <div id="testResult"></div>
        
        <h3>Sample Files</h3>
        <button onclick="createSampleFile('hello')">Create "Hello World" Sample</button>
        <button onclick="createSampleFile('json')">Create JSON Sample</button>
        <button onclick="createSampleFile('code')">Create Code Sample</button>
    </div>

    <div id="docs" class="tab-content">
        <h2>ADLIOT File Format Documentation</h2>
        
        <h3>Overview</h3>
        <p>ADLIOT (.adliot) is a proprietary encrypted text file format designed for secure content storage and transmission.</p>
        
        <h3>File Structure</h3>
        <pre>ADLIOT_V1.0
[ENCRYPTED_CONTENT]
[CHECKSUM]</pre>
        
        <h3>Features</h3>
        <ul>
            <li>Text-based format for easy handling</li>
            <li>Built-in encryption for content security</li>
            <li>Checksum verification for data integrity</li>
            <li>Version control for format evolution</li>
        </ul>
        
        <h3>Encryption Details</h3>
        <p>The format uses a custom encryption algorithm with the following characteristics:</p>
        <ul>
            <li>Character shifting based on position</li>
            <li>Base64 encoding for safe text representation</li>
            <li>Checksum validation to prevent tampering</li>
        </ul>
        
        <h3>File Extension</h3>
        <p>All files must use the <code>.adliot</code> extension.</p>
        
        <h3>Browser Compatibility</h3>
        <p>Works in all modern browsers that support:</p>
        <ul>
            <li>File API</li>
            <li>Blob objects</li>
            <li>URL.createObjectURL()</li>
        </ul>
    </div>

    <div id="integration" class="tab-content">
        <h2>Code Integration</h2>
        
        <h3>JavaScript Implementation</h3>
        <p>Use this code to integrate ADLIOT support into your applications:</p>
        
        <pre><code>// ADLIOT Encoder/Decoder Library
class ADLIOTCodec {
    static encode(content) {
        const header = "ADLIOT_V1.0\n";
        const encrypted = this.encrypt(content);
        const checksum = this.generateChecksum(content);
        return header + encrypted + "\n" + checksum;
    }
    
    static decode(fileContent) {
        const lines = fileContent.split('\n');
        if (lines[0] !== "ADLIOT_V1.0") {
            throw new Error("Invalid ADLIOT file format");
        }
        
        const encrypted = lines[1];
        const checksum = lines[2];
        const decrypted = this.decrypt(encrypted);
        
        if (this.generateChecksum(decrypted) !== checksum) {
            throw new Error("File integrity check failed");
        }
        
        return decrypted;
    }
    
    static encrypt(text) {
        let encrypted = '';
        for (let i = 0; i < text.length; i++) {
            encrypted += String.fromCharCode(text.charCodeAt(i) + (i % 10) + 5);
        }
        return btoa(encrypted);
    }
    
    static decrypt(encrypted) {
        const decoded = atob(encrypted);
        let decrypted = '';
        for (let i = 0; i < decoded.length; i++) {
            decrypted += String.fromCharCode(decoded.charCodeAt(i) - (i % 10) - 5);
        }
        return decrypted;
    }
    
    static generateChecksum(content) {
        let hash = 0;
        for (let i = 0; i < content.length; i++) {
            const char = content.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash;
        }
        return Math.abs(hash).toString(16);
    }
}</code></pre>
        
        <h3>Usage Examples</h3>
        <pre><code>// Create an ADLIOT file
const content = "Hello, World!";
const encoded = ADLIOTCodec.encode(content);

// Save to file (browser)
const blob = new Blob([encoded], { type: 'text/plain' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = 'myfile.adliot';
a.click();

// Read an ADLIOT file
const fileInput = document.getElementById('fileInput');
fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const decoded = ADLIOTCodec.decode(e.target.result);
            console.log('Decoded content:', decoded);
        } catch (error) {
            console.error('Error:', error.message);
        }
    };
    reader.readAsText(file);
});</code></pre>
    </div>

    <script>
        // Add test functions to the existing JavaScript
        function runFullTest() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = '<div style="color: blue;">üß™ Running tests...</div>';
            
            try {
                // Test 1: Basic encoding/decoding
                const testContent = "Hello, this is a test of the ADLIOT file format! üöÄ";
                const encoded = ADLIOTCodec.encode(testContent);
                const decoded = ADLIOTCodec.decode(encoded);
                
                let results = '<h3>Test Results:</h3>';
                
                if (decoded === testContent) {
                    results += '<div class="success">‚úÖ Test 1: Basic encoding/decoding - PASSED</div>';
                } else {
                    results += '<div class="error">‚ùå Test 1: Basic encoding/decoding - FAILED</div>';
                }
                
                // Test 2: Special characters
                const specialContent = "Special chars: !@#$%^&*()_+{}|:<>?[]\\;'\".,/`~";
                const encodedSpecial = ADLIOTCodec.encode(specialContent);
                const decodedSpecial = ADLIOTCodec.decode(encodedSpecial);
                
                if (decodedSpecial === specialContent) {
                    results += '<div class="success">‚úÖ Test 2: Special characters - PASSED</div>';
                } else {
                    results += '<div class="error">‚ùå Test 2: Special characters - FAILED</div>';
                }
                
                // Test 3: Empty content
                try {
                    const emptyEncoded = ADLIOTCodec.encode("");
                    const emptyDecoded = ADLIOTCodec.decode(emptyEncoded);
                    if (emptyDecoded === "") {
                        results += '<div class="success">‚úÖ Test 3: Empty content - PASSED</div>';
                    } else {
                        results += '<div class="error">‚ùå Test 3: Empty content - FAILED</div>';
                    }
                } catch (e) {
                    results += '<div class="error">‚ùå Test 3: Empty content - FAILED (Exception)</div>';
                }
                
                // Show file structure
                results += '<h4>Sample File Structure:</h4>';
                results += `<pre style="background: #f0f0f0; padding: 10px; font-size: 12px;">${encoded}</pre>`;
                
                resultDiv.innerHTML = results;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Test failed with error: ${error.message}</div>`;
            }
        }
        
        function createSampleFile(type) {
            let content = '';
            let filename = '';
            
            switch(type) {
                case 'hello':
                    content = 'Hello, World!\nThis is a sample ADLIOT file.\nCreated on: ' + new Date().toLocaleString();
                    filename = 'hello-world-sample.adliot';
                    break;
                case 'json':
                    content = JSON.stringify({
                        "name": "Sample Data",
                        "version": "1.0",
                        "data": ["item1", "item2", "item3"],
                        "timestamp": new Date().toISOString()
                    }, null, 2);
                    filename = 'json-sample.adliot';
                    break;
                case 'code':
                    content = `function greet(name) {
    console.log("Hello, " + name + "!");
}

// Sample JavaScript code
const users = ["Alice", "Bob", "Charlie"];
users.forEach(user => greet(user));

/* This code is stored in an encrypted ADLIOT file */`;
                    filename = 'code-sample.adliot';
                    break;
            }
            
            const encoded = ADLIOTCodec.encode(content);
            const blob = new Blob([encoded], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();
            
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            document.getElementById('testResult').innerHTML = `<div class="success">‚úÖ Sample file "${filename}" created and downloaded!</div>`;
        }
    </script>
    <script src="adliot.js"></script>
